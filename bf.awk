{gsub(/[^[\].,><+-]/,"");b=b $0}END{for(i=0;i<256;i++)o[sprintf("%c",i)]=i;l=length(b);split(b,t,"");for(i=1;i<=l;i++){c=t[i];if(c~/\[/)s[n++]=i;if(c~/]/){j[s[n-1]]=i;j[i]=s[n-1];delete s[n--]}}a[p]=p=0;for(i=1;i<=l;i++){c=t[i];if(c~/>/)++p;if(c~/</)--p;if(c~/\+/)a[p]+=a[p]<255?1:-255;if(c~/-/)a[p]-=a[p]>0?1:-255;if(c~/\./)printf"%c",a[p];if(c~/,/){if(!g&&getline g<"-")g=g RS;if(g){a[p]=o[substr(g,1,1)];sub(/./,"",g)}}if(c~/\[/&&!a[p])i=j[i];if(c~/]/&&a[p])i=j[i]}}
